# Changelog

All notable changes to this project will be documented in this file.

Changelog entries are grouped by the exact mod version embedded in the built jar.

## 1.0.177 (2026-01-06)
- Fix(worldgen): resolve “Failed to load registries” on world creation by correcting Wayfall multi-noise biome source configuration and `minecraft:disk` configured feature `state_provider` codecs.

## 1.0.176 (2026-01-05)
- Wayfall: replace End-based noise routing with custom climate noises + density functions for a more Aether-like floating-islands feel.
- Wayfall: increase generation height to 384.
- Wayfall: portal arrivals now search for nearby solid ground and will generate a small safety platform if the area is void.

## 1.0.167 (2026-01-05)
- Traprock: after a player has encountered Traprock once, repeat encounters have a high chance to awaken immediately.

## 1.0.167 (2026-01-05)
- Assets: replace placeholder 16x16 textures for Wayfall surface blocks with higher-detail textures (Ashmoss, Fault Dust, Veilgrowth, Veilgrowth Charged).

## 1.0.168 (2026-01-05)
- Traprock: after a player has encountered Traprock once, repeat encounters have a high chance to awaken immediately.

## 1.0.169 (2026-01-05)
- Docs: align changelog entries with commit-count versioning.

## 1.0.170 (2026-01-05)
- Assets: update Wayfall ground-cover block textures (Cairn Moss, Runegrowth, Voidfelt).

## 1.0.171 (2026-01-05)
- Fix(assets): backfill missing stone-family textures referenced by generated models (removes missing-texture rendering).

## 1.0.172 (2026-01-05)
- Fix: `wayfall_portal` is now a walk-into portal (non-solid) that teleports players to the Wayfall spawn.

## 1.0.173 (2026-01-05)
- Fix(assets): stone-family block/item models now reference `kruemblegard:block/<name>` textures (removes duplicated root textures).

## 1.0.174 (2026-01-06)
- Fix(worldgen): correct `minecraft:disk` configured feature `state_provider` for Wayfall surface disks so they can generate.

## 1.0.175 (2026-01-05)
- Wayfall: switch biome distribution from checkerboard to multi-noise, and increase noise settings height/detail for more varied terrain.

## 1.0.165 (2026-01-06)
- Worldgen: centralize important datapack IDs into `worldgen/ModWorldgenKeys` and add runtime validation warnings via `WorldgenValidator`.
- Data-driven: make Crumbling Codex JSON loading codec-backed (safer parsing, fewer brittle assumptions).
- Networking/player state: add a tiny per-player persistent state wrapper + S2C sync packet to avoid client-side guessing.
- Repo/process: add a Conventional Commit hook (`.githooks/commit-msg`) and contributing guidance on asset licensing.

## Unreleased
- Add Wayfall ambient music (`music.wayfall`) and a matching music disc item.
- Add a Wayfall-only dynamic custom skybox renderer (client) with 6 placeholder cubemap face textures.
- Mobs: add Traprock (dormant until disturbed; Blaze-derived GeckoLib mob with editable geo/anim/texture).
- Mobs: add Pebblit (hostile; tameable with cobblestone; follows owner).
- Gameplay: remove Mimic Waystone block (Traprock is spawned via spawn egg/commands for now).
- Dimension: add Wayfall (`kruemblegard:wayfall`) with End-like baseline terrain and custom Wayfall biomes.
- Worldgen: enrich Wayfall biomes (ambience + small biome features) and restrict Wayfall spawns to Krümblegård mobs only.
- Worldgen: add Attuned Ore (Wayfall-only) that drops Attuned Rune Shards (Fortune affects drops).
- Worldgen: add Wayfall plants (Wispstalk, Gravevine, Echocap, Runebloom, Soulberry Shrubs) + Ghoulberry corruption.
- Blocks/items: expand Wayfall wood sets with full vanilla-style wood-family blocks (stairs/slabs/fences/gates/doors/trapdoors/buttons/pressure plates) including recipes + loot.
- Blocks/items: add missing `*_wood` blocks and stripped `stripped_*_{log,wood}` variants for all Wayfall wood families.
- Gameplay: axes now strip Wayfall logs/wood into their stripped variants (preserves axis).
- Assets: give each Wayfall wood-family block its own dedicated texture file (placeholders copied from planks for now).
- Assets: backfill missing block/item textures referenced by models with autogenerated placeholder PNGs.
- Creative: place all mod items/blocks in the single Krümblegård creative tab (no vanilla tab injection).
- Creative: set the Krümblegård creative tab icon to `menu_tab.png`.
- Dev tooling: add `tools/audit_missing_item_textures.ps1` to verify item-model texture refs all exist.
- Dev tooling: add registered-item asset audits (`tools/audit_missing_registered_item_models.ps1`).
- Blocks: Wayfall saplings grow into their matching worldgen configured features (random ticks + bonemeal).
- Blocks/items: add initial scaffolding for new Wayfall staple flora (Voidfern, Runeblossom, Moteshrub, Ashveil, Twilight Bulb, Whispervine).
- Blocks/items: add new Wayfall staple wood sets (Ashbloom, Glimmerpine, Driftwood) and register simple tree Features.
- Worldgen: wire Wayfall staple flora patches + staple trees into Wayfall biomes via configured/placed features + biome modifiers (global staples + biome-specific sets).
- Worldgen: replace staple tree worldgen with Arboria-derived vanilla tree feature templates (multiple variants per species) while swapping in Kruemblegård logs/leaves.
- Blocks: make all Wayfall saplings grow into their matching Arboria-derived tree feature variants (configured-feature selectors), matching natural worldgen.
- Worldgen: distribute Wayfall trees + plants per biome via `data/forge/biome_modifier/add_wayfall_*_flora.json` (matching `docs/WAYFALL_BIOMES.md`).
- Worldgen: replace `#arboria:tree_branch_replaceable` references with `#kruemblegard:tree_branch_replaceable` and define the new block tag.
- Loot: add loot tables for Wayfall staple flora + the three staple wood sets.
- Assets: add placeholder blockstates + item models for Wayfall staples to avoid missing-model rendering.
- Dev tooling: add workspace JSON schema overrides to reduce false-positive loot table/blockstate validation errors.
- Items: Runic tools upgraded to a custom tier above Netherite; recipes now use Attuned Rune Shards + Runic Core.
- Advancements: remove obsolete survived/cleansed advancements tied to removed encounter flow.
- Docs/Codex: update guidebook + docs to match Traprock behavior.
- Fix: resolve “Failed to load registries” on world creation by correcting Wayfall `dimension_type` fields and worldgen feature JSON codecs (including `minecraft:disk` target predicate format).
- Fix: resolve “Failed to load registries” by adding missing `kruemblegard:ashbloom/branch_set/2` configured feature referenced by Ashbloom tree variants.
- Fix: resolve “Failed to load registries” by fixing `minecraft:disk` configured feature schema (`state_provider` is rule-based; `target` is a block predicate) and by correcting sapling selector features to include `placement` entries.
- Fix: register on-ground spawn placements for Wayfall mobs so Traprock/Pebblit don’t spawn in midair/void.
- Refactor: Wayfall flora/saplings now use the `kruemblegard:wayfall_ground` block tag for valid substrate (preparing for terrain palette changes).
- Wayfall: add geology palette blocks (Fractured Wayrock, Crushstone, Ashfall Loam, Fault Dust, Scarstone family, Stoneveil Rubble family) + placeholder textures/models.
- Wayfall: switch dimension noise settings to `kruemblegard:wayfall` so terrain defaults to Fractured Wayrock.
- Wayfall: surface palette is now biome-tag-driven in noise settings (Ashfall Loam in ash-heavy biomes, Voidfelt in void biomes).
- Wayfall: add shallow subsurface layering via surface rules (Crushstone under Ashfall Loam / Voidfelt).
- Wayfall: add surface cover blocks (Veilgrowth/Ashmoss/Runegrowth/Voidfelt) with basic spread/conversion rules + client-side ambience when standing still.
- Gameplay: Scarstone is iron-gated (weak tools are slower, take damage, and yield Cracked Scarstone).
- Fix: add missing block loot tables so all blocks drop as items.
- Blocks/items: add stone-family variants (stairs/slabs/walls) for Wayfall geology blocks (Attuned Stone, Fractured Wayrock, Crushstone, Scarstone + variants, Stoneveil Rubble + variants) including recipes + loot.
- Fix: fence gate block models now reference their planks textures (prevents missing-texture rendering).
- Refactor: wood-family derived block/item models (stairs/slabs/fences/buttons/pressure plates) now reuse their matching planks textures to reduce duplicated placeholder textures.
- Assets: remove unused wood-family derived fence textures now that models reuse planks.
- Fix: generate missing `en_us` block/item names so creative inventory shows readable names.
- Dev tooling: add `tools/generate_stone_family_blocks.ps1` to generate stone-family resource/data files.
- Fix: treat Wayfall surface palette blocks as `minecraft:dirt` so vanilla/mod saplings can be planted and tree features can generate on them.

## 1.0.110 (2026-01-03)
- Docs/workflow: update Copilot instructions to require updating all relevant docs.
- Docs: add `docs/MOD_FEATURES.md` as the complete mod feature reference.

## 1.0.108 (2026-01-03)
- Items: grant the Crumbling Codex once per player on first join.
- Items: move Crumbling Codex page text to `data/kruemblegard/books/crumbling_codex.json` for easy edits.

## 1.0.107 (2026-01-03)
- Boss: phase-based bone hiding (Phase 2 hides armor, Phase 3 hides `-p3` bones, Phase 4 hides whirlwind/debris bones).
- Boss: Phase 4 uses a separate texture placeholder (`kruemblegard_phase4.png`).
- Boss: awards Ender Dragon XP on death.
- Loot: Krümblegård drops a new `runic_core` item.
- Animations: add Phase 4-only idle/move animation slots (`idle_phase4`, `move_phase4`).
- Animations: add phase transition one-shots (`phase2_transition`, `phase3_transition`, `phase4_transition`).
- Items: add `runic_core` and a full Runic tool set (sword/pickaxe/axe/shovel/hoe); remove `runic_core_fragment`.
- Items: Crumbling Codex now opens as a pre-filled guidebook (and appears filled in creative tabs).
- Remove `radiant_essence`.
- Remove `false_waystone` (block + worldgen + biome modifier/tag).
- UI: enhanced custom boss bar (icon + overlay + hit-flash), still fully texture-driven.

## 1.0.104 (2026-01-03)
- Animations: remove unused `animation.kruemblegard.attack` so Blockbench only shows the 12 attacks + idle/move/hurt/death.

## 1.0.103 (2026-01-03)
- Animations: remove legacy unused `boss_attack_*` entries so Blockbench only shows the active animation set.

## 1.0.102 (2026-01-03)
- Animations: add missing `attack_*` boss attack animation entries (placeholders) for Blockbench editing.
- Boss/docs: switch boss attack animations from `boss_attack_*` back to the `attack_*` keys.

## 1.0.101 (2026-01-03)
- Animations: rename boss attack animation keys to a consistent `boss_attack_*` naming scheme.
- Boss/docs: update references to the renamed animations.

## 1.0.100 (2026-01-03)
- Animations: fix duplicate animation-key collisions by renaming the four overlapping attack animations to unique boss-specific keys.

## 1.0.99 (2026-01-03)
- Animations: rename the 12 boss attack animations to ability-specific keys (e.g. `attack_cleave`, `attack_rune_bolt`, etc.).
- Boss/docs: update code + documentation to reference the renamed animations.

## 1.0.98 (2026-01-03)
- Docs: clarify how `totalTicks`/`impactAt` maps to Blockbench impact frames.

## 1.0.97 (2026-01-03)
- Docs: refresh config snippet and correct changelog date.
- Animations: update the JSON controller example to reference the new attack animation names.

## 1.0.96 (2026-01-03)
- Boss: add Phase 4 and expand to 12 unique attacks (fast/heavy/ranged per phase).
- Boss: add 12 new GeckoLib attack animations.
- Docs: update boss attack timings/animation names.

## 1.0.95 (2026-01-03)
- Boss: each phase now uses a fast/heavy/ranged attack kit (less close-range bias).

## 1.0.94 (2026-01-03)
- Boss: minor geo + animation JSON tweaks.

## 1.0.93 (2026-01-03)
- Update Kruemblegård boss GeckoLib animation definitions.
- Docs: restore missing changelog version sections.

## 1.0.92 (2026-01-03)
- CI/versioning: ensure jar version matches GitHub Actions by using full-history checkout and a numeric `1.0.<commitCount>` version.

## 1.0.91 (2026-01-03)
- Versioning/docs: add versioned changelog sections and deterministic jar versioning.

## 1.0.90 (2026-01-03)
- Fix `kruemblegard.animation.json` malformed JSON that could crash client startup (GeckoLib animation loader).
- Update Kruemblegård boss model UVs/armor geometry and refresh the entity texture.
- Workflow: clarify that “push” includes stage+commit+push when the working tree is dirty.
- Further tweak Kruemblegård boss geo UV mappings/armor pieces.
- Update Kruemblegård boss GeckoLib animation definitions.

